<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>
    </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1"> {% load staticfiles %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600italic,700,800' rel='stylesheet'
        type='text/css'>
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans|Candal|Alegreya+Sans">
    <link href='https://fonts.googleapis.com/css?family=Sonsie+One' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="{% static 'onlinetest/css/style1.css' %}" type="text/css" />
    <link rel="stylesheet" href="{% static 'onlinetest/css/imagehover.min.css' %}" type="text/css" />

    <script type="text/javascript">
        
        window.onload = function() {
            data = {{ stuMarksDict|safe }};
            num_ques = parseInt({{ num_ques }});

            

            _bins = {"0-10":0,
                     "11-20":0,
                     "21-30":0,
                     "31-40":0,
                     "41-50":0,
                     "51-60":0,
                     "61-70":0,
                     "71-80":0,
                     "81-90":0,
                     "91-100":0}


            for (i in data) {
                _mark = parseInt(data[i]);

                _mark = (_mark/num_ques)*100;

                if (_mark <= 10) {
                    _bins["0-10"] += 1;
                }
                else if (_mark <= 20) {
                    _bins["11-20"] += 1;
                }
                else if (_mark <= 30) {
                    _bins["21-30"] += 1;
                }
                else if (_mark <= 40) {
                    _bins["31-40"] += 1;
                }
                else if (_mark <= 50) {
                    _bins["41-50"] += 1;
                }
                else if (_mark <= 60) {
                    _bins["51-60"] += 1;
                }
                else if (_mark <= 70) {
                    _bins["61-70"] += 1;
                }
                else if (_mark <= 80) {
                    _bins["71-80"] += 1;
                }
                else if (_mark <= 90) {
                    _bins["81-90"] += 1;
                }
                else {
                    _bins["91-100"] += 1;
                }
            }

            _graphdata = [];
            for (key in _bins) {
                _graphdata.push({y: _bins[key], label:key});
            }


            var chart = new CanvasJS.Chart("chartContainer", {
                animationEnabled: true,
                theme: "light2",
                title: {
                    text: "Scores of students in {{ test_id }}"
                },
                axisY: {
                    title: "Number of students",
                    interval: 1
                },
                data: [{
                    type: "column",
                    showInLegend: true,
                    legendMarkerColor: "grey",
                    legendText: "% score in test",
                    dataPoints: _graphdata
                }]
            })

            chart.render();
        }
    </script>
</head>

<body style="height: 100%">
    <div style="min-height: 87.6%">
        <nav class="navbar navbar-default navbar-static-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">ONLINE EXAMINATION</a>
                </div>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/home">CLIENT PROFILE</a></li>
                        <li class="btn-trial"><a href="/clientlogout">LOGOUT</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container" style="background: #fff;padding: 10px;border-radius:5px">
            <center>
                <div id="chartContainer" style="height: 500px; width: 80%;"></div>
            </center>
        </div>
    </div>


    <center>
        <footer id="footer" class="footer" style="padding: 17px 0">
            SE Project - 2019
            <div class="credits">
                <a href="https://www.pes.edu"><b> PES University</b></a><br>
            </div>
        </footer>
    </center>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" Async></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" Async integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
    
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</body>

</html>
